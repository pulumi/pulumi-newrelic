// *** WARNING: this file was generated by pulumi-language-java. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package com.pulumi.newrelic;

import com.pulumi.core.Output;
import com.pulumi.core.annotations.Export;
import com.pulumi.core.annotations.ResourceType;
import com.pulumi.core.internal.Codegen;
import com.pulumi.newrelic.AlertCompoundConditionArgs;
import com.pulumi.newrelic.Utilities;
import com.pulumi.newrelic.inputs.AlertCompoundConditionState;
import com.pulumi.newrelic.outputs.AlertCompoundConditionComponentCondition;
import java.lang.Boolean;
import java.lang.Integer;
import java.lang.String;
import java.util.List;
import java.util.Optional;
import javax.annotation.Nullable;

/**
 * Use this resource to create and manage compound alert conditions in New Relic. Compound conditions allow you to combine multiple alert conditions using logical expressions (AND, OR, NOT) to create more sophisticated alerting logic.
 * 
 * ## Example Usage
 * 
 * ### Basic Compound Condition (AND)
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.newrelic.AlertPolicy;
 * import com.pulumi.newrelic.AlertPolicyArgs;
 * import com.pulumi.newrelic.NrqlAlertCondition;
 * import com.pulumi.newrelic.NrqlAlertConditionArgs;
 * import com.pulumi.newrelic.inputs.NrqlAlertConditionNrqlArgs;
 * import com.pulumi.newrelic.inputs.NrqlAlertConditionCriticalArgs;
 * import com.pulumi.newrelic.AlertCompoundCondition;
 * import com.pulumi.newrelic.AlertCompoundConditionArgs;
 * import com.pulumi.newrelic.inputs.AlertCompoundConditionComponentConditionArgs;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         var example = new AlertPolicy("example", AlertPolicyArgs.builder()
 *             .name("my-policy")
 *             .build());
 * 
 *         // Create component NRQL conditions
 *         var highResponseTime = new NrqlAlertCondition("highResponseTime", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("High Response Time")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT average(duration) FROM Transaction WHERE appName = 'MyApp'")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(5.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         var highErrorRate = new NrqlAlertCondition("highErrorRate", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("High Error Rate")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT percentage(count(*), WHERE error IS true) FROM Transaction WHERE appName = 'MyApp'")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(5.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         // Create alert compound condition combining both
 *         var criticalServiceHealth = new AlertCompoundCondition("criticalServiceHealth", AlertCompoundConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("Critical Service Health")
 *             .enabled(true)
 *             .triggerExpression("A AND B")
 *             .runbookUrl("https://example.com/runbooks/critical-health")
 *             .thresholdDuration(120)
 *             .componentConditions(            
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(highResponseTime.id())
 *                     .alias("A")
 *                     .build(),
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(highErrorRate.id())
 *                     .alias("B")
 *                     .build())
 *             .facetMatchingBehavior("FACETS_IGNORED")
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ### Complex Condition with Three Components
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.newrelic.NrqlAlertCondition;
 * import com.pulumi.newrelic.NrqlAlertConditionArgs;
 * import com.pulumi.newrelic.inputs.NrqlAlertConditionNrqlArgs;
 * import com.pulumi.newrelic.inputs.NrqlAlertConditionCriticalArgs;
 * import com.pulumi.newrelic.AlertCompoundCondition;
 * import com.pulumi.newrelic.AlertCompoundConditionArgs;
 * import com.pulumi.newrelic.inputs.AlertCompoundConditionComponentConditionArgs;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         var highCpu = new NrqlAlertCondition("highCpu", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("High CPU")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT average(cpuPercent) FROM SystemSample WHERE hostname = 'myhost'")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(80.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         var highMemory = new NrqlAlertCondition("highMemory", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("High Memory")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT average(memoryUsedPercent) FROM SystemSample WHERE hostname = 'myhost'")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(85.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         var diskFull = new NrqlAlertCondition("diskFull", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("Disk Full")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT average(diskUsedPercent) FROM SystemSample WHERE hostname = 'myhost'")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(90.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         var complex = new AlertCompoundCondition("complex", AlertCompoundConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("Complex Infrastructure Alert")
 *             .enabled(true)
 *             .triggerExpression("(A AND B) OR C")
 *             .componentConditions(            
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(highCpu.id())
 *                     .alias("A")
 *                     .build(),
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(highMemory.id())
 *                     .alias("B")
 *                     .build(),
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(diskFull.id())
 *                     .alias("C")
 *                     .build())
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ### With Facet Matching
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.newrelic.NrqlAlertCondition;
 * import com.pulumi.newrelic.NrqlAlertConditionArgs;
 * import com.pulumi.newrelic.inputs.NrqlAlertConditionNrqlArgs;
 * import com.pulumi.newrelic.inputs.NrqlAlertConditionCriticalArgs;
 * import com.pulumi.newrelic.AlertCompoundCondition;
 * import com.pulumi.newrelic.AlertCompoundConditionArgs;
 * import com.pulumi.newrelic.inputs.AlertCompoundConditionComponentConditionArgs;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         var highThroughputPerHost = new NrqlAlertCondition("highThroughputPerHost", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("High Throughput Per Host")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT rate(count(*), 1 minute) FROM Transaction FACET host")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(1000.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         var highErrorRatePerHost = new NrqlAlertCondition("highErrorRatePerHost", NrqlAlertConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("High Error Rate Per Host")
 *             .enabled(true)
 *             .nrql(NrqlAlertConditionNrqlArgs.builder()
 *                 .query("SELECT percentage(count(*), WHERE error IS true) FROM Transaction FACET host")
 *                 .build())
 *             .critical(NrqlAlertConditionCriticalArgs.builder()
 *                 .operator("above")
 *                 .threshold(5.0)
 *                 .thresholdDuration(300)
 *                 .thresholdOccurrences("all")
 *                 .build())
 *             .violationTimeLimitSeconds(3600)
 *             .build());
 * 
 *         var withFacets = new AlertCompoundCondition("withFacets", AlertCompoundConditionArgs.builder()
 *             .policyId(example.id())
 *             .name("Host-Specific Alert")
 *             .enabled(true)
 *             .triggerExpression("A AND B")
 *             .facetMatchingBehavior("FACETS_MATCH")
 *             .componentConditions(            
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(highThroughputPerHost.id())
 *                     .alias("A")
 *                     .build(),
 *                 AlertCompoundConditionComponentConditionArgs.builder()
 *                     .id(highErrorRatePerHost.id())
 *                     .alias("B")
 *                     .build())
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ## Additional Information
 * 
 * ### Understanding Trigger Expressions
 * 
 * Trigger expressions define the logical conditions under which your alert compound condition will activate. Valid operators are:
 * 
 * - **AND** - Both conditions must be true
 * - **OR** - Either condition must be true
 * - **NOT** - Negates a condition
 * - **Parentheses** - Group conditions for complex logic
 * 
 * Examples:
 * 
 * - `&#34;A AND B&#34;` - Activate when both A and B are in violation
 * - `&#34;A OR B&#34;` - Activate when either A or B is in violation
 * - `&#34;A AND NOT B&#34;` - Activate when A is in violation but B is not
 * - `&#34;(A AND B) OR C&#34;` - Activate when both A and B are in violation, OR when C is in violation
 * - `&#34;A AND (B OR C) AND NOT D&#34;` - Activate when A is in violation AND either B or C is in violation AND D is not in violation
 * 
 * ### Facet Matching Behavior
 * 
 * When your component NRQL conditions use FACET clauses:
 * 
 * - **FACETS_IGNORED** (Default) - Facets are not taken into consideration when determining when the compound alert condition activates. If component conditions have violations (on any facet), the compound alert condition will activate based on the trigger expression.
 * - **FACETS_MATCH** - The compound alert condition will activate only when shared facets have matching values. For example, if condition A fires for `host=&#34;server-1&#34;` and condition B fires for `host=&#34;server-2&#34;`, the compound alert condition will NOT activate because the facet values don&#39;t match.
 * 
 * ### Threshold Duration
 * 
 * The `thresholdDuration` parameter controls how long the trigger expression must remain true before the compound alert condition will activate.
 * 
 * ## Import
 * 
 * Compound alert conditions can be imported using the condition ID, e.g.
 * 
 */
@ResourceType(type="newrelic:index/alertCompoundCondition:AlertCompoundCondition")
public class AlertCompoundCondition extends com.pulumi.resources.CustomResource {
    /**
     * The New Relic account ID for managing your compound alert conditions. Defaults to the account ID set in your environment variable `NEW_RELIC_ACCOUNT_ID`.
     * 
     */
    @Export(name="accountId", refs={String.class}, tree="[0]")
    private Output<String> accountId;

    /**
     * @return The New Relic account ID for managing your compound alert conditions. Defaults to the account ID set in your environment variable `NEW_RELIC_ACCOUNT_ID`.
     * 
     */
    public Output<String> accountId() {
        return this.accountId;
    }
    /**
     * The list of conditions to be combined. Each component condition must be enabled. Must include at least 2. See Component Conditions below for details.
     * 
     */
    @Export(name="componentConditions", refs={List.class,AlertCompoundConditionComponentCondition.class}, tree="[0,1]")
    private Output<List<AlertCompoundConditionComponentCondition>> componentConditions;

    /**
     * @return The list of conditions to be combined. Each component condition must be enabled. Must include at least 2. See Component Conditions below for details.
     * 
     */
    public Output<List<AlertCompoundConditionComponentCondition>> componentConditions() {
        return this.componentConditions;
    }
    /**
     * Whether or not the compound alert condition is enabled. Defaults to `true`.
     * 
     */
    @Export(name="enabled", refs={Boolean.class}, tree="[0]")
    private Output<Boolean> enabled;

    /**
     * @return Whether or not the compound alert condition is enabled. Defaults to `true`.
     * 
     */
    public Output<Boolean> enabled() {
        return this.enabled;
    }
    /**
     * How the compound condition will take into account the component conditions&#39; facets during evaluation. Valid values are:
     * - `FACETS_IGNORED` - (Default) Facets are not taken into consideration when determining when the compound alert condition activates
     * - `FACETS_MATCH` - The compound alert condition will activate only when shared facets have matching values
     * 
     */
    @Export(name="facetMatchingBehavior", refs={String.class}, tree="[0]")
    private Output<String> facetMatchingBehavior;

    /**
     * @return How the compound condition will take into account the component conditions&#39; facets during evaluation. Valid values are:
     * - `FACETS_IGNORED` - (Default) Facets are not taken into consideration when determining when the compound alert condition activates
     * - `FACETS_MATCH` - The compound alert condition will activate only when shared facets have matching values
     * 
     */
    public Output<String> facetMatchingBehavior() {
        return this.facetMatchingBehavior;
    }
    /**
     * The title of the compound alert condition.
     * 
     */
    @Export(name="name", refs={String.class}, tree="[0]")
    private Output<String> name;

    /**
     * @return The title of the compound alert condition.
     * 
     */
    public Output<String> name() {
        return this.name;
    }
    /**
     * The ID of the policy where this alert compound condition should be used.
     * 
     */
    @Export(name="policyId", refs={String.class}, tree="[0]")
    private Output<String> policyId;

    /**
     * @return The ID of the policy where this alert compound condition should be used.
     * 
     */
    public Output<String> policyId() {
        return this.policyId;
    }
    /**
     * Runbook URL to display in notifications.
     * 
     */
    @Export(name="runbookUrl", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> runbookUrl;

    /**
     * @return Runbook URL to display in notifications.
     * 
     */
    public Output<Optional<String>> runbookUrl() {
        return Codegen.optional(this.runbookUrl);
    }
    /**
     * The duration, in seconds, that the trigger expression must be true before the compound alert condition will activate. Between 30-86400 seconds.
     * 
     */
    @Export(name="thresholdDuration", refs={Integer.class}, tree="[0]")
    private Output<Integer> thresholdDuration;

    /**
     * @return The duration, in seconds, that the trigger expression must be true before the compound alert condition will activate. Between 30-86400 seconds.
     * 
     */
    public Output<Integer> thresholdDuration() {
        return this.thresholdDuration;
    }
    /**
     * Expression that defines how component condition evaluations are combined. Valid operators are &#39;AND&#39;, &#39;OR&#39;, &#39;NOT&#39;. For more complex expressions, use parentheses. Use the aliases from `componentConditions` to build expressions like `&#34;A AND B&#34;`, `&#34;A OR B&#34;`, `&#34;(A AND B) OR C&#34;`, or `&#34;A AND (B OR C) AND NOT (D AND E)&#34;`.
     * 
     */
    @Export(name="triggerExpression", refs={String.class}, tree="[0]")
    private Output<String> triggerExpression;

    /**
     * @return Expression that defines how component condition evaluations are combined. Valid operators are &#39;AND&#39;, &#39;OR&#39;, &#39;NOT&#39;. For more complex expressions, use parentheses. Use the aliases from `componentConditions` to build expressions like `&#34;A AND B&#34;`, `&#34;A OR B&#34;`, `&#34;(A AND B) OR C&#34;`, or `&#34;A AND (B OR C) AND NOT (D AND E)&#34;`.
     * 
     */
    public Output<String> triggerExpression() {
        return this.triggerExpression;
    }

    /**
     *
     * @param name The _unique_ name of the resulting resource.
     */
    public AlertCompoundCondition(java.lang.String name) {
        this(name, AlertCompoundConditionArgs.Empty);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     */
    public AlertCompoundCondition(java.lang.String name, AlertCompoundConditionArgs args) {
        this(name, args, null);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param options A bag of options that control this resource's behavior.
     */
    public AlertCompoundCondition(java.lang.String name, AlertCompoundConditionArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("newrelic:index/alertCompoundCondition:AlertCompoundCondition", name, makeArgs(args, options), makeResourceOptions(options, Codegen.empty()), false);
    }

    private AlertCompoundCondition(java.lang.String name, Output<java.lang.String> id, @Nullable AlertCompoundConditionState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("newrelic:index/alertCompoundCondition:AlertCompoundCondition", name, state, makeResourceOptions(options, id), false);
    }

    private static AlertCompoundConditionArgs makeArgs(AlertCompoundConditionArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        if (options != null && options.getUrn().isPresent()) {
            return null;
        }
        return args == null ? AlertCompoundConditionArgs.Empty : args;
    }

    private static com.pulumi.resources.CustomResourceOptions makeResourceOptions(@Nullable com.pulumi.resources.CustomResourceOptions options, @Nullable Output<java.lang.String> id) {
        var defaultOptions = com.pulumi.resources.CustomResourceOptions.builder()
            .version(Utilities.getVersion())
            .build();
        return com.pulumi.resources.CustomResourceOptions.merge(defaultOptions, options, id);
    }

    /**
     * Get an existing Host resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state
     * @param options Optional settings to control the behavior of the CustomResource.
     */
    public static AlertCompoundCondition get(java.lang.String name, Output<java.lang.String> id, @Nullable AlertCompoundConditionState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        return new AlertCompoundCondition(name, id, state, options);
    }
}
